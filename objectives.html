<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Objectives</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="objectives.html" class="active"><strong aria-hidden="true">1.1.</strong> Objectives</a></li><li class="chapter-item expanded "><a href="why-json-rpc.html"><strong aria-hidden="true">1.2.</strong> Why JSON-RPC?</a></li><li class="chapter-item expanded "><a href="grouping-functions-and-node-capabilities.html"><strong aria-hidden="true">1.3.</strong> Grouping functions and node capabilities</a></li><li class="chapter-item expanded "><a href="dos-attacks-resilience.html"><strong aria-hidden="true">1.4.</strong> DoS attacks resilience</a></li><li class="chapter-item expanded "><a href="load-balancers.html"><strong aria-hidden="true">1.5.</strong> Load balancers</a></li></ol></li><li class="chapter-item expanded "><a href="api/introduction.html"><strong aria-hidden="true">2.</strong> API specification</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/archive.html"><strong aria-hidden="true">2.1.</strong> archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/archive_unstable_body.html"><strong aria-hidden="true">2.1.1.</strong> archive_unstable_body</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_genesisHash.html"><strong aria-hidden="true">2.1.2.</strong> archive_unstable_genesisHash</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_hashByHeight.html"><strong aria-hidden="true">2.1.3.</strong> archive_unstable_hashByHeight</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_header.html"><strong aria-hidden="true">2.1.4.</strong> archive_unstable_header</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_stopBody.html"><strong aria-hidden="true">2.1.5.</strong> archive_unstable_stopBody</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_stopHashByHeight.html"><strong aria-hidden="true">2.1.6.</strong> archive_unstable_stopHashByHeight</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_stopHeader.html"><strong aria-hidden="true">2.1.7.</strong> archive_unstable_stopHeader</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_stopStorage.html"><strong aria-hidden="true">2.1.8.</strong> archive_unstable_stopStorage</a></li><li class="chapter-item expanded "><a href="api/archive_unstable_storage.html"><strong aria-hidden="true">2.1.9.</strong> archive_unstable_storage</a></li></ol></li><li class="chapter-item expanded "><a href="api/chainHead.html"><strong aria-hidden="true">2.2.</strong> chainHead</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/chainHead_unstable_body.html"><strong aria-hidden="true">2.2.1.</strong> chainHead_unstable_body</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_call.html"><strong aria-hidden="true">2.2.2.</strong> chainHead_unstable_call</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_follow.html"><strong aria-hidden="true">2.2.3.</strong> chainHead_unstable_follow</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_genesisHash.html"><strong aria-hidden="true">2.2.4.</strong> chainHead_unstable_genesisHash</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_header.html"><strong aria-hidden="true">2.2.5.</strong> chainHead_unstable_header</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_stopBody.html"><strong aria-hidden="true">2.2.6.</strong> chainHead_unstable_stopBody</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_stopCall.html"><strong aria-hidden="true">2.2.7.</strong> chainHead_unstable_stopCall</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_stopStorage.html"><strong aria-hidden="true">2.2.8.</strong> chainHead_unstable_stopStorage</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_storage.html"><strong aria-hidden="true">2.2.9.</strong> chainHead_unstable_storage</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_unfollow.html"><strong aria-hidden="true">2.2.10.</strong> chainHead_unstable_unfollow</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_unpin.html"><strong aria-hidden="true">2.2.11.</strong> chainHead_unstable_unpin</a></li><li class="chapter-item expanded "><a href="api/chainHead_unstable_wasmQuery.html"><strong aria-hidden="true">2.2.12.</strong> chainHead_unstable_wasmQuery</a></li></ol></li><li class="chapter-item expanded "><a href="api/chainSpec.html"><strong aria-hidden="true">2.3.</strong> chainSpec</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/chainSpec_unstable_chainName.html"><strong aria-hidden="true">2.3.1.</strong> chainSpec_unstable_chainName</a></li><li class="chapter-item expanded "><a href="api/chainSpec_unstable_genesisHash.html"><strong aria-hidden="true">2.3.2.</strong> chainSpec_unstable_genesisHash</a></li><li class="chapter-item expanded "><a href="api/chainSpec_unstable_properties.html"><strong aria-hidden="true">2.3.3.</strong> chainSpec_unstable_properties</a></li></ol></li><li class="chapter-item expanded "><a href="api/rpc.html"><strong aria-hidden="true">2.4.</strong> rpc</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/rpc_methods.html"><strong aria-hidden="true">2.4.1.</strong> rpc_methods</a></li></ol></li><li class="chapter-item expanded "><a href="api/sudo.html"><strong aria-hidden="true">2.5.</strong> sudo</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/sudo_unstable_addReservedPeer.html"><strong aria-hidden="true">2.5.1.</strong> sudo_unstable_addReservedPeer</a></li><li class="chapter-item expanded "><a href="api/sudo_unstable_p2pDiscover.html"><strong aria-hidden="true">2.5.2.</strong> sudo_unstable_p2pDiscover</a></li><li class="chapter-item expanded "><a href="api/sudo_unstable_pendingTransactions.html"><strong aria-hidden="true">2.5.3.</strong> sudo_unstable_pendingTransactions</a></li><li class="chapter-item expanded "><a href="api/sudo_unstable_removeReservedPeer.html"><strong aria-hidden="true">2.5.4.</strong> sudo_unstable_removeReservedPeer</a></li><li class="chapter-item expanded "><a href="api/sudo_unstable_rotateKeys.html"><strong aria-hidden="true">2.5.5.</strong> sudo_unstable_rotateKeys</a></li><li class="chapter-item expanded "><a href="api/sudo_unstable_version.html"><strong aria-hidden="true">2.5.6.</strong> sudo_unstable_version</a></li></ol></li><li class="chapter-item expanded "><a href="api/transaction.html"><strong aria-hidden="true">2.6.</strong> transaction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api/transaction_unstable_submitAndWatch.html"><strong aria-hidden="true">2.6.1.</strong> transaction_unstable_submitAndWatch</a></li><li class="chapter-item expanded "><a href="api/transaction_unstable_unwatch.html"><strong aria-hidden="true">2.6.2.</strong> transaction_unstable_unwatch</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="objectives"><a class="header" href="#objectives">Objectives</a></h1>
<p>The objective of this JSON-RPC interface is to accomodate multiple kinds of audiences:</p>
<ul>
<li>End-user-facing applications that want to read and interact with the blockchain.</li>
<li>Node operators to want to make sure that their node is operating correctly, and perform some administrative operations such as rotating keys.</li>
<li>Core/parachain developers that want to manually look at the storage and figure out what is happening on the blockchain.</li>
<li>Oracles or bridges need to be able to read and interface with the blockchain.</li>
<li>Archivers want to look at past data.</li>
</ul>
<h2 id="end-user-facing-applications"><a class="header" href="#end-user-facing-applications">End-user-facing applications</a></h2>
<p>End-user-facing applications, such as a wallet or an unstoppable application, need to be able to read the storage of the blockchain and submit transactions.</p>
<p>These applications perform JSON-RPC function calls either against a node run locally by the end-user, or against a trusted JSON-RPC server. The locally-run node solution is strictly better for security and decentralization reasons, and we would like to encourage this. The trusted JSON-RPC server should be used as a back-up solution only in case it is not possible to run a node locally.</p>
<p>In order to be more user-friendly, a node run locally is very often a <em>light client</em> that doesn't hold the storage of the blockchain in its memory. The JSON-RPC functions are designed having in mind the fact that the target of the function calls might be a light client that doesn't have all the needed information immediately available.</p>
<p>End-user-facing applications generally rarely need to access older blocks. They usually care only about the storage of the finalized block and of the best block.</p>
<p>End-user-facing applications would normally not directly use the JSON-RPC interface, but an intermediary layer library built on top of the JSON-RPC interface. The JSON-RPC interface is a bit complicated to use, in a exchange for making functions more explicit and predictable.</p>
<p>An end-user-facing application is typically a website that the end-user visits. Both in the case of a locally-run node and in the case of a remote node, the JSON-RPC server is subject to attacks by malicious applications as an application can ask the end-user's browser to send millions of requests to the server. For this reason, it is important for the JSON-RPC server to resist to some degree to attacks (both DoS attacks and vulnerabilities), and thus for the JSON-RPC interface to not require behaviors that contradict DoS resilience.</p>
<p>When calls are made against a node run locally, the bandwidth consumption and latency of the JSON-RPC functions isn't very important. However, the JSON-RPC functions have a very precise behavior, in order to avoid situations where an ambiguity in what the JSON-RPC client desires leads the JSON-RPC server to use more bandwidth than is strictly required.</p>
<p>When calls are made against a trusted JSON-RPC server, the bandwidth consumption and latency are more important. However, one should keep in mind that we would like to discourage trusted JSON-RPC servers.</p>
<h2 id="node-operators"><a class="header" href="#node-operators">Node operators</a></h2>
<p>DevOps that are administering a node (be it a full node, a validator, or an archive node) want to be able to know whether their node is operating properly, and might want to change some configuration options while the node is running.</p>
<p>DevOps are usually familiar with bash scripts. In order to make their life easier, the functions in the JSON-RPC interface that are relevant to them are usable with just a few CLI tools. The <a href="https://github.com/vi/websocat">websocat</a> CLI tool is probably the easiest way to communicate over a WebSocket connection at the time of writing of this document.</p>
<p>DevOps shouldn't have to use unstable functions when writing bash scripts. They want to be able to run scripts automatically in the background without them breaking. As such, the functions that they need are stable.</p>
<p>Since scripts usually run on the same machine or a machine in the same data center as the target of the JSON-RPC function calls, the bandwidth consumption and latency of the JSON-RPC functions isn't very important for this usage.</p>
<h2 id="debugging-developers"><a class="header" href="#debugging-developers">Debugging developers</a></h2>
<p>Core/parachain developers want to be able to look at the on-chain storage or the internal state of a node, for debugging purposes.</p>
<p>When debugging the chain or the node implementation, developers rarely care about the stability of the function they use. They perform manual function calls using some tools (either a UI or a CLI tool) and throw away the function call once they're finished debugging.</p>
<p>In order to accomodate this audience, it should be relatively easy to perform a JSON-RPC function call manually, and developers should be able to easily add to the interface new semi-temporary JSON-RPC functions specific to their debugging needs.</p>
<p>The target of the JSON-RPC function calls is either their own node, or a specific node that has encountered an issue, and the bandwidth consumption and latency of the JSON-RPC functions isn't very important for this usage.</p>
<h2 id="oracles-and-bridges"><a class="header" href="#oracles-and-bridges">Oracles and bridges</a></h2>
<p>Oracles and bridges consist for example in cryptocurencies exchanges or any software that programmatically interacts with a chain.</p>
<p>Contrary to end-user-facing applications, no human is interfacing directly or indirectly with the JSON-RPC client. Everything is automatic.
However, everything said in the section about end-user-facing applications also applies here.</p>
<h2 id="archivers"><a class="header" href="#archivers">Archivers</a></h2>
<p>Archivers are websites or applications that want to look at the past state of the chain.</p>
<p>In order to accomodate this audience, the JSON-RPC interface should provide functions that lets you access any block of the chain, and the storage of the chain at any block.
Note that pruned blocks, in other words blocks that aren't descendants of the latest finalized blocks, are out of scope of this use case as inspecting them isn't considered useful for archiving purposes.</p>
<p>Apart from this difference, this category is a mix between &quot;end-user-facing applications&quot; and &quot;node operators&quot;.</p>
<p>Archivers expect the JSON-RPC function calls to be stable and easy to use. They normally don't pay too much attention to performances and don't optimize their code, as long as everything is relatively fast.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="why-json-rpc.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="why-json-rpc.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
