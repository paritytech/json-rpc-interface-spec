<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>chainHead_unstable_call</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../objectives.html"><strong aria-hidden="true">1.1.</strong> Objectives</a></li><li class="chapter-item expanded "><a href="../why-json-rpc.html"><strong aria-hidden="true">1.2.</strong> Why JSON-RPC?</a></li><li class="chapter-item expanded "><a href="../grouping-functions-and-node-capabilities.html"><strong aria-hidden="true">1.3.</strong> Grouping functions and node capabilities</a></li><li class="chapter-item expanded "><a href="../dos-attacks-resilience.html"><strong aria-hidden="true">1.4.</strong> DoS attacks resilience</a></li><li class="chapter-item expanded "><a href="../load-balancers.html"><strong aria-hidden="true">1.5.</strong> Load balancers</a></li></ol></li><li class="chapter-item expanded "><a href="../api.html"><strong aria-hidden="true">2.</strong> API specification</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/archive.html"><strong aria-hidden="true">2.1.</strong> archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/archive_unstable_body.html"><strong aria-hidden="true">2.1.1.</strong> archive_unstable_body</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_call.html"><strong aria-hidden="true">2.1.2.</strong> archive_unstable_call</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_finalizedHeight.html"><strong aria-hidden="true">2.1.3.</strong> archive_unstable_finalizedHeight</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_genesisHash.html"><strong aria-hidden="true">2.1.4.</strong> archive_unstable_genesisHash</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_hashByHeight.html"><strong aria-hidden="true">2.1.5.</strong> archive_unstable_hashByHeight</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_header.html"><strong aria-hidden="true">2.1.6.</strong> archive_unstable_header</a></li><li class="chapter-item expanded "><a href="../api/archive_unstable_storage.html"><strong aria-hidden="true">2.1.7.</strong> archive_unstable_storage</a></li></ol></li><li class="chapter-item expanded "><a href="../api/chainHead.html"><strong aria-hidden="true">2.2.</strong> chainHead</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/chainHead_unstable_body.html"><strong aria-hidden="true">2.2.1.</strong> chainHead_unstable_body</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_call.html" class="active"><strong aria-hidden="true">2.2.2.</strong> chainHead_unstable_call</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_continue.html"><strong aria-hidden="true">2.2.3.</strong> chainHead_unstable_continue</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_follow.html"><strong aria-hidden="true">2.2.4.</strong> chainHead_unstable_follow</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_header.html"><strong aria-hidden="true">2.2.5.</strong> chainHead_unstable_header</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_stopOperation.html"><strong aria-hidden="true">2.2.6.</strong> chainHead_unstable_stopOperation</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_storage.html"><strong aria-hidden="true">2.2.7.</strong> chainHead_unstable_storage</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_unfollow.html"><strong aria-hidden="true">2.2.8.</strong> chainHead_unstable_unfollow</a></li><li class="chapter-item expanded "><a href="../api/chainHead_unstable_unpin.html"><strong aria-hidden="true">2.2.9.</strong> chainHead_unstable_unpin</a></li></ol></li><li class="chapter-item expanded "><a href="../api/chainSpec.html"><strong aria-hidden="true">2.3.</strong> chainSpec</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/chainSpec_v1_chainName.html"><strong aria-hidden="true">2.3.1.</strong> chainSpec_v1_chainName</a></li><li class="chapter-item expanded "><a href="../api/chainSpec_v1_genesisHash.html"><strong aria-hidden="true">2.3.2.</strong> chainSpec_v1_genesisHash</a></li><li class="chapter-item expanded "><a href="../api/chainSpec_v1_properties.html"><strong aria-hidden="true">2.3.3.</strong> chainSpec_v1_properties</a></li></ol></li><li class="chapter-item expanded "><a href="../api/rpc.html"><strong aria-hidden="true">2.4.</strong> rpc</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/rpc_methods.html"><strong aria-hidden="true">2.4.1.</strong> rpc_methods</a></li></ol></li><li class="chapter-item expanded "><a href="../api/sudo.html"><strong aria-hidden="true">2.5.</strong> sudo</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/sudo_unstable_p2pDiscover.html"><strong aria-hidden="true">2.5.1.</strong> sudo_unstable_p2pDiscover</a></li><li class="chapter-item expanded "><a href="../api/sudo_unstable_pendingTransactions.html"><strong aria-hidden="true">2.5.2.</strong> sudo_unstable_pendingTransactions</a></li><li class="chapter-item expanded "><a href="../api/sudo_unstable_version.html"><strong aria-hidden="true">2.5.3.</strong> sudo_unstable_version</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.6.</strong> sudo_sessionKeys</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/sudo_sessionKeys_unstable_generate.html"><strong aria-hidden="true">2.6.1.</strong> sudo_sessionKeys_unstable_generate</a></li></ol></li><li class="chapter-item expanded "><a href="../api/transaction.html"><strong aria-hidden="true">2.7.</strong> transaction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/transaction_unstable_submitAndWatch.html"><strong aria-hidden="true">2.7.1.</strong> transaction_unstable_submitAndWatch</a></li><li class="chapter-item expanded "><a href="../api/transaction_unstable_unwatch.html"><strong aria-hidden="true">2.7.2.</strong> transaction_unstable_unwatch</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="chainhead_unstable_call"><a class="header" href="#chainhead_unstable_call">chainHead_unstable_call</a></h1>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>followSubscription</code>: An opaque string that was returned by <code>chainHead_unstable_follow</code>. The <code>withRuntime</code> parameter of the call must have been equal to <code>true</code>.</li>
<li><code>hash</code>: String containing the hexadecimal-encoded hash of the header of the block to make the call against.</li>
<li><code>function</code>: Name of the runtime entry point to call as a string.</li>
<li><code>callParameters</code>: Hexadecimal-encoded SCALE-encoded value to pass as input to the runtime function.</li>
</ul>
<p><strong>Return value</strong>: A JSON object.</p>
<p>The JSON object returned by this function has one the following formats:</p>
<h3 id="started"><a class="header" href="#started">Started</a></h3>
<pre><code>{
    &quot;result&quot;: &quot;started&quot;,
    &quot;operationId&quot;: ...
}
</code></pre>
<p>This return value indicates that the request has successfully started.</p>
<p><code>operationId</code> is a string containing an opaque value representing the operation.</p>
<h3 id="limitreached"><a class="header" href="#limitreached">LimitReached</a></h3>
<pre><code>{
    &quot;result&quot;: &quot;limitReached&quot;
}
</code></pre>
<p>This return value indicates the call couldn't be started because the server is overloaded, or that the <code>followSubscription</code> is invalid or stale.</p>
<p>The JSON-RPC client should try again after an on-going <code>chainHead_unstable_storage</code>, <code>chainHead_unstable_body</code>, or <code>chainHead_unstable_call</code> operation finishes.</p>
<p>The JSON-RPC server must accept at least 16 concurrent operations for any given <code>chainHead_unstable_follow</code> subscription. In other words, as long as the JSON-RPC client makes sure that no more than 16 operations are in progress at any given item, it is guaranteed that all of its operations will be accepted by the JSON-RPC server.
For this purpose, each item requested through <code>chainHead_unstable_storage</code> counts as one operation, and each call to <code>chainHead_unstable_body</code> and <code>chainHead_unstable_call</code> counts as one operation.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The JSON-RPC server must invoke the entry point of the runtime of the given block using the storage of the given block.</p>
<p><strong>Note</strong>: The runtime is still allowed to call host functions with side effects, however these side effects must be discarded. For example, a runtime function call can try to modify the storage of the chain, but this modification must not be actually applied. The only motivation for performing a call is to obtain the return value.</p>
<p>The progress of the operation is indicated through <code>operationCallDone</code>, <code>operationInaccessible</code>, or <code>operationError</code> notifications generated on the corresponding <code>chainHead_unstable_follow</code> subscription.</p>
<p>The operation continues even if the target block is unpinned with <code>chainHead_unstable_unpin</code>.</p>
<p>This function should be seen as a complement to <code>chainHead_unstable_follow</code>, allowing the JSON-RPC client to retrieve more information about a block that has been reported. Use <code>archive_unstable_call</code> if instead you want to call the runtime of an arbitrary block.</p>
<p><strong>Note</strong>: This can be used as a replacement for the legacy <code>state_getMetadata</code>, <code>system_accountNextIndex</code>, and <code>payment_queryInfo</code> functions.</p>
<h2 id="possible-errors"><a class="header" href="#possible-errors">Possible errors</a></h2>
<ul>
<li>If the networking part of the behaviour fails, then an <code>{&quot;event&quot;: &quot;operationInaccessible&quot;}</code> notification is generated (as explained above).</li>
<li>If the <code>followSubscription</code> is invalid or stale, then <code>&quot;result&quot;: &quot;limitReached&quot;</code> is returned (as explained above).</li>
<li>If the method to call doesn't exist in the Wasm runtime of the chain, then an <code>{&quot;event&quot;: &quot;operationError&quot;}</code> notification is generated.</li>
<li>If the runtime call fails (e.g. because it triggers a panic in the runtime, running out of memory, etc., or if the runtime call takes too much time), then an <code>{&quot;event&quot;: &quot;operationError&quot;}</code> notification is generated.</li>
<li>A JSON-RPC error with error code <code>-32801</code> is generated if the block hash passed as parameter doesn't correspond to any block that has been reported by <code>chainHead_unstable_follow</code>, or the block hash has been unpinned.</li>
<li>A JSON-RPC error with error code <code>-32802</code> is generated if the <code>followSubscription</code> corresponds to a follow where <code>withRuntime</code> was <code>false</code>.</li>
<li>A JSON-RPC error with error code <code>-32602</code> is generated if one of the parameters doesn't correspond to the expected type (similarly to a missing parameter or an invalid parameter type).</li>
</ul>
<h2 id="about-callparameters"><a class="header" href="#about-callparameters">About <code>callParameters</code></a></h2>
<p>Runtime entry points typically accept multiple input parameters, but this JSON-RPC function accepts as parameter a single hexadecimal-encoded value. The reason is that all the parameters are concatenated together before performing the call anyway. There is no reason to force JSON-RPC clients to provide a proper division between the various parameters if they are all concatenated in the implementation anyway.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../api/chainHead_unstable_body.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../api/chainHead_unstable_continue.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../api/chainHead_unstable_body.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../api/chainHead_unstable_continue.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
